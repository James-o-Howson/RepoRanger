<div class="container">
    <div class="left-control card">
        <div class="card">
            <p-accordion>
                <p-accordionTab>
                    <ng-template pTemplate="header">
                        <span class="flex gap-2 w-full">
                            <span class="pi {{filterIcon}}"></span>
                            <span class="font-bold white-space-nowrap">Filters</span>
                            <div *ngIf="hasSelectedRepositories()" class="ml-auto">
                                Repositories: 
                                <p-chip class="ml-1" *ngFor="let repository of selectedRepositories.slice(0, 3)">
                                    {{ repository.name }}
                                </p-chip>
                                <p-chip class="ml-1" *ngIf="repositoriesChipOverflowCount() > 0">
                                    {{ chipOverflowCountText(repositoriesChipOverflowCount()) }}
                                </p-chip>
                            </div>
                            <div *ngIf="hasSelectedProjects()" class="ml-auto">
                                Projects: 
                                <p-chip class="ml-1" *ngFor="let project of selectedProjects.slice(0, 3)">
                                    {{ project.name }}
                                </p-chip>
                                <p-chip class="ml-1" *ngIf="projectsChipOverflowCount() > 0">
                                    {{ chipOverflowCountText(projectsChipOverflowCount()) }}
                                </p-chip>
                            </div>
                        </span>
                    </ng-template>
                    <div class="flex justify-content-left m-3">
                        <div class="flex flex-column gap-2 p-float-label">
                            <p-multiSelect id="repositories" [showToggleAll]="true" [disabled]="repositoriesFilterDisabled" [selectAll]="" [options]="repositories" [(ngModel)]="selectedRepositories" (onChange)="selectedRepositoriesChanged($event)" 
                                [filter]="true" optionLabel="name" placeholder="Select Repositories" (onSelectAllChange)="repositoriesSelectAllChanged($event)" ></p-multiSelect>
                            <label for="repositories">Repositories</label>
                        </div>
                        <div class="flex flex-column gap-2 ml-2 p-float-label">
                            <p-multiSelect id="projects" [options]="projects" [(ngModel)]="selectedProjects" (onChange)="selectedProjectsChanged($event)" 
                                [filter]="true" optionLabel="name" placeholder="Select Projects"></p-multiSelect>
                            <label for="projects">Projects</label>

                        </div>
                    </div>  
                </p-accordionTab>
            </p-accordion>
            <app-dependency-table />
        </div>
    </div>
    <div class="right-control">
        <app-dependency-details-view />
    </div>
  </div> 